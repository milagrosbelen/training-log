# üì± MiLogit - Resumen Conceptual del Sistema

## üéØ ¬øQu√© es MiLogit?

MiLogit es una aplicaci√≥n web para registrar y llevar un seguimiento de tus entrenamientos. Permite guardar informaci√≥n sobre cada sesi√≥n de ejercicio: qu√© ejercicios hiciste, cu√°nto peso levantaste, cu√°ntas repeticiones, y cu√°nto tiempo dur√≥ tu entrenamiento.

---

## üèóÔ∏è Arquitectura del Sistema

El sistema est√° dividido en **tres partes principales** que trabajan juntas:

1. **Frontend** - Lo que ve y usa el usuario
2. **Backend** - El servidor que procesa las peticiones
3. **Base de Datos** - Donde se guarda toda la informaci√≥n

---

## üñ•Ô∏è C√ìMO FUNCIONA EL FRONTEND

### ¬øQu√© es el Frontend?

El frontend es la parte de la aplicaci√≥n que el usuario ve y con la que interact√∫a. Es como la "cara" de la aplicaci√≥n que aparece en el navegador web o en el celular.

### Componentes Principales

**1. Calendario Visual**
- Muestra los d√≠as del mes
- Permite seleccionar un d√≠a para ver o crear un entrenamiento
- Marca visualmente los d√≠as que tienen entrenamientos guardados

**2. Formulario de Entrenamiento**
- Permite ingresar el t√≠tulo del entrenamiento (ej: "Piernas + gl√∫teos")
- Permite seleccionar ejercicios de una lista predefinida organizada por grupos musculares
- Permite agregar peso, repeticiones y series para cada ejercicio
- Permite registrar la duraci√≥n del entrenamiento (horas y minutos)

**3. Vista de Resumen**
- Muestra los entrenamientos guardados de un d√≠a espec√≠fico
- Permite editar o eliminar entrenamientos existentes

**4. Gr√°ficos de Progreso**
- Muestra estad√≠sticas y gr√°ficos sobre los entrenamientos realizados
- Ayuda a visualizar el progreso a lo largo del tiempo

### ¬øC√≥mo Funciona Internamente?

El frontend usa **React**, que es una tecnolog√≠a que permite crear interfaces interactivas. Funciona de la siguiente manera:

1. **Estado de la Aplicaci√≥n**: El frontend mantiene en memoria una lista de todos los entrenamientos que el usuario ha creado. Esta lista se actualiza constantemente.

2. **Interacci√≥n del Usuario**: Cuando el usuario hace clic en un bot√≥n, selecciona una fecha, o completa un formulario, el frontend reacciona inmediatamente mostrando cambios en la pantalla.

3. **Comunicaci√≥n con el Backend**: Cuando el usuario guarda un entrenamiento, el frontend no lo guarda directamente. En su lugar, env√≠a los datos al backend para que los procese y los guarde en la base de datos.

4. **Actualizaci√≥n Autom√°tica**: Despu√©s de guardar un entrenamiento, el frontend pide autom√°ticamente al backend la lista completa actualizada de entrenamientos, y actualiza la pantalla sin necesidad de recargar la p√°gina.

---

## ‚öôÔ∏è C√ìMO FUNCIONA EL BACKEND

### ¬øQu√© es el Backend?

El backend es como un "mesero" en un restaurante. El usuario (frontend) hace pedidos, y el backend los procesa, va a la cocina (base de datos), trae lo que se necesita, y se lo entrega al usuario.

### Funciones Principales

**1. Recibir Peticiones**
- El backend est√° siempre "escuchando" en el puerto 3000, esperando que lleguen peticiones del frontend
- Cuando llega una petici√≥n, la analiza y decide qu√© hacer

**2. Validar Datos**
- Antes de guardar cualquier informaci√≥n, el backend verifica que los datos sean correctos
- Verifica que todos los campos obligatorios est√©n presentes
- Verifica que los datos tengan el formato correcto (por ejemplo, que la fecha sea v√°lida)
- Verifica que los n√∫meros sean n√∫meros v√°lidos
- Si algo est√° mal, devuelve un mensaje de error claro al frontend

**3. Comunicarse con la Base de Datos**
- Una vez que los datos est√°n validados, el backend se conecta a PostgreSQL
- Ejecuta comandos SQL para guardar o recuperar informaci√≥n
- Usa un "pool de conexiones" para manejar m√∫ltiples peticiones de forma eficiente

**4. Responder al Frontend**
- Despu√©s de procesar la petici√≥n, el backend env√≠a una respuesta al frontend
- La respuesta puede ser exitosa (con los datos solicitados) o un error (con un mensaje explicando qu√© sali√≥ mal)

### Endpoints Disponibles

El backend tiene "direcciones" espec√≠ficas (llamadas endpoints) para diferentes acciones:

- **GET /health**: Verifica que el servidor est√© funcionando
- **POST /trainings**: Crea un nuevo entrenamiento en la base de datos
- **GET /trainings**: Obtiene todos los entrenamientos guardados, ordenados por fecha (m√°s recientes primero)

---

## üîå C√ìMO SE CONECTAN FRONTEND Y BACKEND

### La Comunicaci√≥n HTTP

El frontend y el backend se comunican usando el protocolo HTTP, que es el mismo que usa tu navegador para cargar p√°ginas web.

### Flujo de Comunicaci√≥n

**1. Cuando el Usuario Guarda un Entrenamiento:**

```
Usuario completa formulario ‚Üí Frontend prepara los datos ‚Üí Frontend env√≠a POST al backend
‚Üí Backend valida los datos ‚Üí Backend guarda en base de datos ‚Üí Backend responde "√©xito"
‚Üí Frontend pide lista actualizada (GET) ‚Üí Backend devuelve lista completa ‚Üí Frontend actualiza pantalla
```

**2. Cuando la Aplicaci√≥n se Inicia:**

```
Aplicaci√≥n se carga ‚Üí Frontend pide lista de entrenamientos (GET) ‚Üí Backend consulta base de datos
‚Üí Backend devuelve lista ‚Üí Frontend muestra entrenamientos en el calendario
```

### Transformaci√≥n de Datos

El frontend y el backend usan formatos ligeramente diferentes para los datos:

- **Frontend usa**: `date`, `type`, `duration`, `exercises`
- **Backend espera**: `fecha`, `user_id`, `duracion_minutos`, `notas`

Por eso existe una capa de "transformaci√≥n" que convierte los datos de un formato al otro cuando se env√≠an o reciben.

### CORS (Permisos de Acceso)

El backend tiene configurado CORS, que es como un "permiso" que le dice al navegador: "Est√° bien que el frontend (que puede estar en otro puerto o dominio) se comunique conmigo". Sin esto, el navegador bloquear√≠a las peticiones por seguridad.

---

## üíæ C√ìMO SE GUARDA Y RECUPERA LA INFORMACI√ìN

### La Base de Datos PostgreSQL

PostgreSQL es como un archivero digital muy organizado. En lugar de tener carpetas f√≠sicas, tiene "tablas" que son como hojas de c√°lculo donde se guarda la informaci√≥n de forma estructurada.

### Estructura de la Base de Datos

**Tabla: `users`**
- Guarda informaci√≥n de los usuarios (id, nombre, email)
- Por ahora se usa un usuario por defecto (user_id = 1)

**Tabla: `trainings`**
- Guarda cada entrenamiento realizado
- Campos principales:
  - `id`: Identificador √∫nico (se genera autom√°ticamente)
  - `user_id`: A qu√© usuario pertenece este entrenamiento
  - `fecha`: Fecha del entrenamiento (formato YYYY-MM-DD)
  - `duracion_minutos`: Cu√°nto dur√≥ el entrenamiento
  - `notas`: Informaci√≥n adicional en formato JSON (t√≠tulo del entrenamiento y lista de ejercicios)

### Proceso de Guardado

**1. El Usuario Guarda un Entrenamiento:**
- El frontend env√≠a los datos al backend
- El backend valida que todo est√© correcto
- El backend crea un comando SQL: `INSERT INTO trainings ...`
- PostgreSQL ejecuta el comando y guarda una nueva fila en la tabla
- PostgreSQL devuelve el registro completo guardado (incluyendo el ID generado)
- El backend env√≠a esta confirmaci√≥n al frontend

### Proceso de Recuperaci√≥n

**1. El Usuario Ve sus Entrenamientos:**
- El frontend pide la lista al backend
- El backend crea un comando SQL: `SELECT * FROM trainings ORDER BY fecha DESC`
- PostgreSQL busca todas las filas en la tabla
- PostgreSQL devuelve todos los registros ordenados por fecha (m√°s recientes primero)
- El backend transforma los datos al formato del frontend
- El frontend recibe la lista y la muestra en el calendario

### Pool de Conexiones

El backend usa un "pool de conexiones" para comunicarse con PostgreSQL. Es como tener varios tel√©fonos disponibles para llamar a la base de datos. En lugar de crear una nueva conexi√≥n cada vez (que es lento), el backend reutiliza conexiones existentes, lo que hace todo m√°s r√°pido y eficiente.

---

## üîÑ FLUJO COMPLETO: Ejemplo Real

Imaginemos que un usuario quiere guardar un entrenamiento del d√≠a de hoy:

### Paso 1: Usuario Interact√∫a con el Frontend
- El usuario abre la aplicaci√≥n en su navegador
- Selecciona el d√≠a de hoy en el calendario
- Completa el formulario: t√≠tulo "Piernas", agrega ejercicios, marca 60 minutos de duraci√≥n
- Hace clic en "Guardar"

### Paso 2: Frontend Prepara los Datos
- El frontend toma todos los datos del formulario
- Los transforma al formato que el backend espera
- Prepara una petici√≥n HTTP POST con estos datos

### Paso 3: Frontend Env√≠a al Backend
- El frontend env√≠a la petici√≥n a `http://localhost:3000/trainings`
- El navegador permite esta petici√≥n gracias a CORS configurado en el backend

### Paso 4: Backend Recibe y Valida
- El backend recibe la petici√≥n
- Verifica que `user_id`, `fecha` y `duracion_minutos` est√©n presentes
- Verifica que `user_id` sea un n√∫mero v√°lido
- Verifica que la fecha tenga el formato correcto (YYYY-MM-DD)
- Verifica que la fecha no sea futura
- Verifica que el `user_id` exista en la tabla `users`

### Paso 5: Backend Guarda en Base de Datos
- Si todo est√° bien, el backend se conecta a PostgreSQL usando el pool de conexiones
- Ejecuta: `INSERT INTO trainings (user_id, fecha, duracion_minutos, notas) VALUES (...)`
- PostgreSQL guarda el nuevo registro y genera un ID autom√°ticamente
- PostgreSQL devuelve el registro completo guardado

### Paso 6: Backend Responde al Frontend
- El backend env√≠a una respuesta exitosa (c√≥digo 201) con los datos del entrenamiento guardado

### Paso 7: Frontend Actualiza la Lista
- El frontend recibe la confirmaci√≥n
- Inmediatamente hace una nueva petici√≥n GET para obtener todos los entrenamientos actualizados
- El backend consulta PostgreSQL: `SELECT * FROM trainings ORDER BY fecha DESC`
- El backend devuelve la lista completa actualizada

### Paso 8: Frontend Actualiza la Pantalla
- El frontend recibe la lista actualizada
- Actualiza su estado interno con los nuevos datos
- La pantalla se actualiza autom√°ticamente mostrando el nuevo entrenamiento en el calendario
- Se muestra un mensaje de √©xito al usuario
- Todo esto sucede sin recargar la p√°gina

---

## üéØ Resumen en 3 Puntos

1. **Frontend**: Es lo que el usuario ve y usa. Reacciona a las acciones del usuario y se comunica con el backend para guardar o recuperar informaci√≥n.

2. **Backend**: Es el servidor que procesa las peticiones, valida los datos, y se comunica con la base de datos. Act√∫a como intermediario entre el frontend y la base de datos.

3. **Base de Datos**: Es donde se guarda permanentemente toda la informaci√≥n. PostgreSQL organiza los datos en tablas y permite guardar y recuperar informaci√≥n de forma r√°pida y segura.

---

## üîê Seguridad y Validaci√≥n

- **Validaci√≥n en el Backend**: Todos los datos se validan antes de guardarse. Esto previene errores y protege la integridad de la informaci√≥n.

- **Manejo de Errores**: Si algo sale mal en cualquier paso, el sistema devuelve mensajes de error claros que ayudan a entender qu√© pas√≥.

- **CORS**: Permite que el frontend y el backend se comuniquen de forma segura, incluso si est√°n en diferentes puertos o dominios.

---

## üìù Notas Finales

- El sistema est√° dise√±ado para ser **escalable**: Puede manejar m√∫ltiples usuarios y muchos entrenamientos sin problemas.

- El sistema es **modular**: Cada parte (frontend, backend, base de datos) puede funcionar de forma independiente, lo que facilita el mantenimiento y las mejoras futuras.

- El sistema es **reactivo**: Los cambios se reflejan inmediatamente en la pantalla sin necesidad de recargar la p√°gina, proporcionando una experiencia de usuario fluida.





